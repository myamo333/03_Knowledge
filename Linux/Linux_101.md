# Linux
## Linuxとは？
- 世界中で使われているオープンソースのオペレーティングシステム
<br>

## なぜLinuxを学ぶべきか
- カスタマイズ可能で幅広い分野で役立つ
- 無料で利用可能である
- インフラ分野でデファクトスタンダードである
- 開発コミュニティが活発である
<br>

## Linuxディストリビューションとは？
- LinuxとはLinuxカーネルを中枢に、パッケージされたもの
- Linuxカーネルは、ハードウェアとソフトウェア領域の中継
- 代表的なディストリビューション
  - Debian系
    - 安定性高く、多くのディストリビューションがある
  - Red Hat系
    - 企業向けで利用されることが多い
  - Slackware系
    - シンプルで軽量、高度なカスタマイズが可能

    | ディストリビューション | 特徴 |
    | :----: | ---- |
    |Debian|- 高い安定性と信頼性<br>- 多くのパッケージが利用可能|
    |Ubuntu|- 初心者にも使いやすく人気<br>- デスクトップ、サーバー環境両方で広く使われる|
    |Fedora|- Red Hat Enterprise Linuxが母体<br>- 最新技術がより早く取り込まれる<br>- システムの安定性少し心配|
    |CentOS|- 長期のサポート<br>- 商用利用で数多くの実績|
<br>

## Linux環境の構築方法の種類
| 方法 | メリット | デメリット |
| ---- | ---- | ---- |
| **直接PCにインストール**<br>PCの主OSとしてインストールする| PCリソースを最大限活用可能 | 他OSとの共存が難しい |
|**デュラルブート**<br>他OSもインストールし起動時に選択 | 複数OSを1つのPCで選択可能 | リソースのパーティション管理が複雑になることも |
| **仮想マシン**<br>PC上に仮想PCを作成 | 既存PCに手軽にLinux環境が構築可能 | リソースを既存OSを通じて利用するためパフォーマンス低下の恐れ |
|**仮想コンテナ** (Docker)<br>継承な仮想コンテナを作成 | 構築・破棄が高速で手軽 | 一部本物のLinuxとは異なる挙動をする恐れ |
<br>

## コマンドライン
- なぜコマンドラインを学ぶのか
  - デスクトップ版にはGUIが存在しているが、サーバー版にGUIがないことが多い (EC2もない)
  - マウス操作より高速で正確
  - スクリプト化と相性が良く、自動化可能
  - Linuxの多くの設定は、コマンドラインからしか変更できない
<br>

## カーネル
- OS (カーネル)は、PCリソースやハードウェアに近い役割を担っている
- カーネルは機械語になっており、ターミナルのコマンドを通して、カーネルと会話をする必要がある
- システムコールを使うことで、カーネルに対して指示をする事が可能
  - ただし、ハードウェアに近い設計になっている
- シェルを使うことで、ユーザーが実際にOSを触るための機能を用意している
  - bash, zsh, fish...
- シェルによって微妙に挙動が違う。Ubuntuはデフォルトでbashが使われる
<br>

## ファイルとディレクトリの基本
||説明|
|---|---|
|/|ファイルシステムの最上位に位置するディレクトリ<br>すべてのファイルとディレクトリの起点<br>ルートディレクトリと呼ばれる|
|/home/taro|各ユーザーのホームディレクトリ。`~`や`$HOME`で省略することができる<br>MacOSでは、`/User`が`/home`代わり|
|/bin|基本的な実行可能ファイル(コマンド)が格納される<br>例えば、`ls`, `cp`, `mv`など|

<br>

### 基本のコマンド10選
|コマンド|説明|
|:----:|:----|
|`pwd`|- Print Working Directory<br>- 絶対パスで取得する|
|`cd`|- Change Directory<br>- 作業ディレクトリを変更する<br>- 移動先は相対パスで指定可能|
|`ls`|- List<br>- ディレクトリ、ファイルの一覧を表示する<br> - `-a`: 隠しファイルなども表示できるa<br>- `-l`: 追加情報を表示できる|
|`touch`|- 新しい空のファイルを作成する<br>- 既存のファイルを指定するとタイムスタンプだけを更新する<br>- `-t`: 指定したタイムスタンプで更新できる|
|`cp`|- コピーを実施する<br>- `cp {コピー元ファイル} {コピー先ファイル/ディレクトリ}`<br>- `-i`: コピー先に同じ名前がある場合に確認す<br>- `-r`: ディレクトリを丸ごとコピーする<br>- `-u`: コピー元ファイルがコピー先よりも新しい場合にコピーする|
|`mv`|ファイルやディレクトリの場所を移動する<br>- `mv {移動元} {移動先ディレクトリ}`<br>- ファイルの名前を変更することにも利用する<br>- `-n`: 移動先に同名ファイルがある場合は、上書きしない|
|`rm`|- ファイルやディレクトリを削除する<br>- `rm {ファイル/ ディレクトリ}`<br>- `-i`: 削除前に確認する<br>- `-r`: ディレクトリを丸ごと消す|
|`mkdir`|- 新しいディレクトリを作成する<br>- `-p`: 階層的なディレクトリを作成する事ができる|
|`cat`|- ファイルの中身を表示する<br>- `-n`: 行番号も表示できる<br>- ファイルを連結して指定すると、連結した状態で見れる<br>- リダイレクトを使うと、ファイルを連結し、別のファイルに保存することができる|
|`grep`|- ファイルの中から特定の文字列を含む部分を抜き出す<br>`-i`: 大文字・小文字の見分けない<br>`-n`: 行番号を表示する<br>`-r`: ディレクトリのファイル全てに対して検索する<br> 検索にスペースを含めたい場合は、''で囲む|

<br>

### エイリアス
- コマンドのショートカットを設定する
  - エイリアスは一時的なもので、ターミナルを閉じると設定が消える
  - 例
  mkdir -p = md
    ```bash
    $ alias md='mkdir -p'
    ```
<br>

### 環境変数
- システム全体や特定のアプリケーションに関する設定情報を保持する変数
- アプリケーション等で、環境変数の読み取りなどを実施することができる
  ```bash
  $ export MY_VARIABLE="Hello World"
  $ printenv MY_VARIABLE
  ```
<br>

### エイリアスと環境変数の永続化
- .bashrcファイルに永続化したいコマンドを記載する
<br>

### 重要な環境変数：PATHとは
- シェルが実行可能なコマンドを探すディレクトリのリストを保持する環境変数
<br>

### 便利なコマンド
|コマンド|説明|
|:----:|----|
|`find`|- find {ディレクトリ} {条件}<br>- `fine . --name {ファイル名}`<br>- `find . --name *.txt`<br>- `-size`<br>- `-mtime -7`<br>- `-exec cat {} \;`|
|`sed`|- テキストファイルを編集するときに便利なコマンド<br>- appleをorangeに置き換える<br>　`sed 's/apple/orange/g' input.txt > output.txt`|
|`gzip`|- 圧縮を行うコマンド<br>- `gzip {圧縮したいファイル}`<br>- 解凍するコマンド<br>　`gunzip {圧縮したファイル}`|
|`tar`|- アーカイブを行うコマンド<br>- `tar -c -v -f archive.tar home-dir-files.txt Desktop/`<br>- アーカイブを展開する<br>　`tar -xvf archive.tar`|

<br>

### vi
#### なぜviを学ぶべきなのか
- GUI不要
GUIのないサーバ環境でも利用できる
- 多くのLinuxでインストール済み
Linux開発する際は使えることが常識とされる
- 高いカスタマイズ性
カスタマイズが簡単にでき効率的なファイル編集が可能
<br>

#### viのモード
- ノーマル/インサート/コマンドライン/ビジュアル
- インサートモード
  - 一般的なファイルの編集モード
  - ノーマルモードから `i`を入力し遷移、ノーマルモードに戻る場合は、 `esc`
- ノーマルモード
  - hjkl -> ←↓↑→
- コマンドラインモード
  - ファイルの保存と閉じる
  - `:w`: 保存
  - `:q`: ファイルを閉じる
  - `:wq`: 保存しながら閉じる